<?xml version="1.0" encoding="UTF-8"?>
<bpmn2:definitions xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns="http://www.omg.org/bpmn20" xmlns:bpmn2="http://www.omg.org/spec/BPMN/20100524/MODEL" xmlns:bpmndi="http://www.omg.org/spec/BPMN/20100524/DI" xmlns:bpsim="http://www.bpsim.org/schemas/1.0" xmlns:dc="http://www.omg.org/spec/DD/20100524/DC" xmlns:di="http://www.omg.org/spec/DD/20100524/DI" xmlns:drools="http://www.jboss.org/drools" id="_6f2dUCoFEe-RvpWAYG7VGQ" xsi:schemaLocation="http://www.omg.org/spec/BPMN/20100524/MODEL BPMN20.xsd http://www.jboss.org/drools drools.xsd http://www.bpsim.org/schemas/1.0 bpsim.xsd http://www.omg.org/spec/DD/20100524/DC DC.xsd http://www.omg.org/spec/DD/20100524/DI DI.xsd " exporter="jBPM Process Modeler" exporterVersion="2.0" targetNamespace="http://www.omg.org/bpmn20">
  <bpmn2:itemDefinition id="_requestIdItem" structureRef="String"/>
  <bpmn2:itemDefinition id="_responseItem" structureRef="String"/>
  <bpmn2:itemDefinition id="_authorizationItem" structureRef="String"/>
  <bpmn2:itemDefinition id="_newPartywiseConsentsItem" structureRef="java.util.ArrayList"/>
  <bpmn2:itemDefinition id="_stageItem" structureRef="String"/>
  <bpmn2:itemDefinition id="_additionalParamsItem" structureRef="java.util.Map"/>
  <bpmn2:itemDefinition id="_serviceNameItem" structureRef="String"/>
  <bpmn2:itemDefinition id="_operationNameItem" structureRef="String"/>
  <bpmn2:itemDefinition id="_partyWiseConsentItem" structureRef="java.util.Map"/>
  <bpmn2:itemDefinition id="_createResponseItem" structureRef="String"/>
  <bpmn2:itemDefinition id="_D8CB23B5-4EE4-4338-A728-D5176BC45719_multiInstanceItemType_partyWiseConsent" structureRef="java.util.Map"/>
  <bpmn2:itemDefinition id="__D00F34B5-3E89-491E-8D71-63ABB6032B28_OperationNameInputXItem" structureRef="String"/>
  <bpmn2:itemDefinition id="__D00F34B5-3E89-491E-8D71-63ABB6032B28_ServiceNameInputXItem" structureRef="String"/>
  <bpmn2:itemDefinition id="__D00F34B5-3E89-491E-8D71-63ABB6032B28_AdditionalParametersInputXItem" structureRef="String"/>
  <bpmn2:itemDefinition id="__D00F34B5-3E89-491E-8D71-63ABB6032B28_AuthorizationInputXItem" structureRef="String"/>
  <bpmn2:itemDefinition id="__D00F34B5-3E89-491E-8D71-63ABB6032B28_RequestIdInputXItem" structureRef="String"/>
  <bpmn2:itemDefinition id="__D00F34B5-3E89-491E-8D71-63ABB6032B28_ApplicationIdInputXItem" structureRef="String"/>
  <bpmn2:itemDefinition id="__D00F34B5-3E89-491E-8D71-63ABB6032B28_CIFInputXItem" structureRef="String"/>
  <bpmn2:itemDefinition id="__D00F34B5-3E89-491E-8D71-63ABB6032B28_ErrorProcessInputXItem" structureRef="String"/>
  <bpmn2:itemDefinition id="__D00F34B5-3E89-491E-8D71-63ABB6032B28_FacilityIdInputXItem" structureRef="String"/>
  <bpmn2:itemDefinition id="__D00F34B5-3E89-491E-8D71-63ABB6032B28_ObjectNameInputXItem" structureRef="String"/>
  <bpmn2:itemDefinition id="__D00F34B5-3E89-491E-8D71-63ABB6032B28_PartyIdInputXItem" structureRef="String"/>
  <bpmn2:itemDefinition id="__D00F34B5-3E89-491E-8D71-63ABB6032B28_AuthorizationOutputXItem" structureRef="String"/>
  <bpmn2:itemDefinition id="__D00F34B5-3E89-491E-8D71-63ABB6032B28_ResultOutputXItem" structureRef="String"/>
  <bpmn2:itemDefinition id="__74FB79B1-3568-4965-AD7E-C4DA797582A1_RequestIdInputXItem" structureRef="String"/>
  <bpmn2:itemDefinition id="__74FB79B1-3568-4965-AD7E-C4DA797582A1_OperationNameInputXItem" structureRef="String"/>
  <bpmn2:itemDefinition id="__74FB79B1-3568-4965-AD7E-C4DA797582A1_ServiceNameInputXItem" structureRef="String"/>
  <bpmn2:itemDefinition id="__74FB79B1-3568-4965-AD7E-C4DA797582A1_AuthorizationInputXItem" structureRef="String"/>
  <bpmn2:itemDefinition id="__74FB79B1-3568-4965-AD7E-C4DA797582A1_AdditionalParametersInputXItem" structureRef="String"/>
  <bpmn2:itemDefinition id="__74FB79B1-3568-4965-AD7E-C4DA797582A1_ApplicationIdInputXItem" structureRef="String"/>
  <bpmn2:itemDefinition id="__74FB79B1-3568-4965-AD7E-C4DA797582A1_CIFInputXItem" structureRef="String"/>
  <bpmn2:itemDefinition id="__74FB79B1-3568-4965-AD7E-C4DA797582A1_ErrorProcessInputXItem" structureRef="String"/>
  <bpmn2:itemDefinition id="__74FB79B1-3568-4965-AD7E-C4DA797582A1_FacilityIdInputXItem" structureRef="String"/>
  <bpmn2:itemDefinition id="__74FB79B1-3568-4965-AD7E-C4DA797582A1_ObjectNameInputXItem" structureRef="String"/>
  <bpmn2:itemDefinition id="__74FB79B1-3568-4965-AD7E-C4DA797582A1_PartyIdInputXItem" structureRef="String"/>
  <bpmn2:itemDefinition id="__74FB79B1-3568-4965-AD7E-C4DA797582A1_AuthorizationOutputXItem" structureRef="String"/>
  <bpmn2:itemDefinition id="__74FB79B1-3568-4965-AD7E-C4DA797582A1_ResultOutputXItem" structureRef="String"/>
  <bpmn2:process id="InfinityAssist.CopyConsentstoConsentMS" drools:packageName="org.jbpm" drools:version="1.0" drools:adHoc="false" name="Copy Consents to Consent MS" isExecutable="true" processType="Public">
    <bpmn2:extensionElements>
      <drools:import name="java.util.Map"/>
      <drools:import name="java.util.HashMap"/>
    </bpmn2:extensionElements>
    <bpmn2:property id="requestId" itemSubjectRef="_requestIdItem" name="requestId"/>
    <bpmn2:property id="response" itemSubjectRef="_responseItem" name="response"/>
    <bpmn2:property id="authorization" itemSubjectRef="_authorizationItem" name="authorization"/>
    <bpmn2:property id="newPartywiseConsents" itemSubjectRef="_newPartywiseConsentsItem" name="newPartywiseConsents"/>
    <bpmn2:property id="stage" itemSubjectRef="_stageItem" name="stage"/>
    <bpmn2:property id="additionalParams" itemSubjectRef="_additionalParamsItem" name="additionalParams"/>
    <bpmn2:property id="serviceName" itemSubjectRef="_serviceNameItem" name="serviceName"/>
    <bpmn2:property id="operationName" itemSubjectRef="_operationNameItem" name="operationName"/>
    <bpmn2:sequenceFlow id="_94860009-4612-4030-B8FB-35672E788D3E" sourceRef="_74FB79B1-3568-4965-AD7E-C4DA797582A1" targetRef="_D8CB23B5-4EE4-4338-A728-D5176BC45719"/>
    <bpmn2:sequenceFlow id="_A168F590-5F1F-41F0-9DBC-0B1ADD1C7185" sourceRef="_38AD41E3-39D3-4D9E-9F40-B4433DF4F6B8" targetRef="_74FB79B1-3568-4965-AD7E-C4DA797582A1"/>
    <bpmn2:sequenceFlow id="_2845F112-A4D9-41E1-9FFB-CCF30007103F" sourceRef="_D8CB23B5-4EE4-4338-A728-D5176BC45719" targetRef="_F08F484F-F084-4305-A62C-A76F4B740D13">
      <bpmn2:extensionElements>
        <drools:metaData name="isAutoConnection.source">
          <drools:metaValue><![CDATA[true]]></drools:metaValue>
        </drools:metaData>
        <drools:metaData name="isAutoConnection.target">
          <drools:metaValue><![CDATA[true]]></drools:metaValue>
        </drools:metaData>
      </bpmn2:extensionElements>
    </bpmn2:sequenceFlow>
    <bpmn2:startEvent id="_38AD41E3-39D3-4D9E-9F40-B4433DF4F6B8">
      <bpmn2:outgoing>_A168F590-5F1F-41F0-9DBC-0B1ADD1C7185</bpmn2:outgoing>
    </bpmn2:startEvent>
    <bpmn2:task id="_74FB79B1-3568-4965-AD7E-C4DA797582A1" drools:taskName="OriginationServiceTask" name="Fetch Consents">
      <bpmn2:documentation id="_6f2dUSoFEe-RvpWAYG7VGQ"><![CDATA[OriginationWorkItem/index.html]]></bpmn2:documentation>
      <bpmn2:extensionElements>
        <drools:metaData name="elementname">
          <drools:metaValue><![CDATA[Fetch Consents]]></drools:metaValue>
        </drools:metaData>
        <drools:onEntry-script scriptFormat="http://www.java.com/java">
          <drools:script><![CDATA[Map<String, String> _additionalParams = new HashMap<String, String>();
_additionalParams.put("stage", stage);
kcontext.setVariable("additionalParams", _additionalParams);]]></drools:script>
        </drools:onEntry-script>
        <drools:onExit-script scriptFormat="http://www.java.com/java">
          <drools:script><![CDATA[org.json.JSONObject responseJSON = new org.json.JSONObject(kcontext.getVariable("response").toString());
String consentBackend = responseJSON.optString("consentBackend");
kcontext.setVariable("serviceName", "CorporateLOSJavaServices");
kcontext.setVariable("operationName", "CreateCustomerTermsAndCondOperation");
if (responseJSON.has("partywiseConsents")) {
	org.json.JSONArray partywiseConsentsArray = new org.json.JSONArray(
			responseJSON.opt("partywiseConsents").toString());
	java.util.Map<String, Object> consentMap = new java.util.HashMap<String, Object>();
	java.util.ArrayList<java.util.Map<String, Object>> newPartywiseConsentsList = new java.util.ArrayList<>();
	if(!"DBXDB".equals(consentBackend)) {
		for (int i = 0; i < partywiseConsentsArray.length(); i++) {
			org.json.JSONObject partywiseConsentsObj = new org.json.JSONObject(
					partywiseConsentsArray.get(i).toString());
			consentMap = new java.util.HashMap<String, Object>();
			consentMap.put("partyId", partywiseConsentsObj.opt("partyId").toString());
			consentMap.put("expiryDate", partywiseConsentsObj.opt("expiryDate").toString());
			consentMap.put("termsNConditionContentId",
					partywiseConsentsObj.opt("termsNConditionContentId").toString());
			consentMap.put("consentGiven",
					Boolean.parseBoolean(partywiseConsentsObj.opt("consentGiven").toString()));
			consentMap.put("masterConsentId", partywiseConsentsObj.opt("masterConsentId").toString());
			consentMap.put("effectiveDate", partywiseConsentsObj.opt("effectiveDate").toString());
			consentMap.put("applicationId", partywiseConsentsObj.opt("applicationId").toString());
			newPartywiseConsentsList.add(consentMap);
		}
		kcontext.setVariable("serviceName", "CorporateLOSSpotlightService");
		kcontext.setVariable("operationName", "createPartyConsentDetails");
	} else {
		for (int i = 0; i < partywiseConsentsArray.length(); i++) {
			consentMap = new java.util.HashMap<String, Object>();
			org.json.JSONObject partywiseConsentsObj = new org.json.JSONObject(
					partywiseConsentsArray.get(i).toString());
			consentMap.put("id", partywiseConsentsObj.opt("id").toString());
			consentMap.put("customerId", partywiseConsentsObj.opt("customerId").toString());
			consentMap.put("versionId", partywiseConsentsObj.opt("versionId").toString());
			consentMap.put("termsAndConditionsCode", partywiseConsentsObj.opt("termsAndConditionsCode").toString());
			consentMap.put("languageCode", partywiseConsentsObj.opt("languageCode").toString());
			consentMap.put("companyLegalUnit", partywiseConsentsObj.opt("companyLegalUnit").toString());
			newPartywiseConsentsList.add(consentMap);
		}
	}
	kcontext.setVariable("newPartywiseConsents", newPartywiseConsentsList);
}]]></drools:script>
        </drools:onExit-script>
      </bpmn2:extensionElements>
      <bpmn2:incoming>_A168F590-5F1F-41F0-9DBC-0B1ADD1C7185</bpmn2:incoming>
      <bpmn2:outgoing>_94860009-4612-4030-B8FB-35672E788D3E</bpmn2:outgoing>
      <bpmn2:ioSpecification id="_6f2dUioFEe-RvpWAYG7VGQ">
        <bpmn2:dataInput id="_74FB79B1-3568-4965-AD7E-C4DA797582A1_RequestIdInputX" drools:dtype="String" itemSubjectRef="__74FB79B1-3568-4965-AD7E-C4DA797582A1_RequestIdInputXItem" name="RequestId"/>
        <bpmn2:dataInput id="_74FB79B1-3568-4965-AD7E-C4DA797582A1_OperationNameInputX" drools:dtype="String" itemSubjectRef="__74FB79B1-3568-4965-AD7E-C4DA797582A1_OperationNameInputXItem" name="OperationName"/>
        <bpmn2:dataInput id="_74FB79B1-3568-4965-AD7E-C4DA797582A1_ServiceNameInputX" drools:dtype="String" itemSubjectRef="__74FB79B1-3568-4965-AD7E-C4DA797582A1_ServiceNameInputXItem" name="ServiceName"/>
        <bpmn2:dataInput id="_74FB79B1-3568-4965-AD7E-C4DA797582A1_AuthorizationInputX" drools:dtype="String" itemSubjectRef="__74FB79B1-3568-4965-AD7E-C4DA797582A1_AuthorizationInputXItem" name="Authorization"/>
        <bpmn2:dataInput id="_74FB79B1-3568-4965-AD7E-C4DA797582A1_AdditionalParametersInputX" drools:dtype="String" itemSubjectRef="__74FB79B1-3568-4965-AD7E-C4DA797582A1_AdditionalParametersInputXItem" name="AdditionalParameters"/>
        <bpmn2:dataInput id="_74FB79B1-3568-4965-AD7E-C4DA797582A1_ApplicationIdInputX" drools:dtype="String" itemSubjectRef="__74FB79B1-3568-4965-AD7E-C4DA797582A1_ApplicationIdInputXItem" name="ApplicationId"/>
        <bpmn2:dataInput id="_74FB79B1-3568-4965-AD7E-C4DA797582A1_CIFInputX" drools:dtype="String" itemSubjectRef="__74FB79B1-3568-4965-AD7E-C4DA797582A1_CIFInputXItem" name="CIF"/>
        <bpmn2:dataInput id="_74FB79B1-3568-4965-AD7E-C4DA797582A1_ErrorProcessInputX" drools:dtype="String" itemSubjectRef="__74FB79B1-3568-4965-AD7E-C4DA797582A1_ErrorProcessInputXItem" name="ErrorProcess"/>
        <bpmn2:dataInput id="_74FB79B1-3568-4965-AD7E-C4DA797582A1_FacilityIdInputX" drools:dtype="String" itemSubjectRef="__74FB79B1-3568-4965-AD7E-C4DA797582A1_FacilityIdInputXItem" name="FacilityId"/>
        <bpmn2:dataInput id="_74FB79B1-3568-4965-AD7E-C4DA797582A1_ObjectNameInputX" drools:dtype="String" itemSubjectRef="__74FB79B1-3568-4965-AD7E-C4DA797582A1_ObjectNameInputXItem" name="ObjectName"/>
        <bpmn2:dataInput id="_74FB79B1-3568-4965-AD7E-C4DA797582A1_PartyIdInputX" drools:dtype="String" itemSubjectRef="__74FB79B1-3568-4965-AD7E-C4DA797582A1_PartyIdInputXItem" name="PartyId"/>
        <bpmn2:dataInput id="_74FB79B1-3568-4965-AD7E-C4DA797582A1_TaskNameInputX" drools:dtype="Object" name="TaskName"/>
        <bpmn2:dataOutput id="_74FB79B1-3568-4965-AD7E-C4DA797582A1_AuthorizationOutputX" drools:dtype="String" itemSubjectRef="__74FB79B1-3568-4965-AD7E-C4DA797582A1_AuthorizationOutputXItem" name="Authorization"/>
        <bpmn2:dataOutput id="_74FB79B1-3568-4965-AD7E-C4DA797582A1_ResultOutputX" drools:dtype="String" itemSubjectRef="__74FB79B1-3568-4965-AD7E-C4DA797582A1_ResultOutputXItem" name="Result"/>
        <bpmn2:inputSet id="_6f2dUyoFEe-RvpWAYG7VGQ">
          <bpmn2:dataInputRefs>_74FB79B1-3568-4965-AD7E-C4DA797582A1_RequestIdInputX</bpmn2:dataInputRefs>
          <bpmn2:dataInputRefs>_74FB79B1-3568-4965-AD7E-C4DA797582A1_OperationNameInputX</bpmn2:dataInputRefs>
          <bpmn2:dataInputRefs>_74FB79B1-3568-4965-AD7E-C4DA797582A1_ServiceNameInputX</bpmn2:dataInputRefs>
          <bpmn2:dataInputRefs>_74FB79B1-3568-4965-AD7E-C4DA797582A1_AuthorizationInputX</bpmn2:dataInputRefs>
          <bpmn2:dataInputRefs>_74FB79B1-3568-4965-AD7E-C4DA797582A1_AdditionalParametersInputX</bpmn2:dataInputRefs>
          <bpmn2:dataInputRefs>_74FB79B1-3568-4965-AD7E-C4DA797582A1_ApplicationIdInputX</bpmn2:dataInputRefs>
          <bpmn2:dataInputRefs>_74FB79B1-3568-4965-AD7E-C4DA797582A1_CIFInputX</bpmn2:dataInputRefs>
          <bpmn2:dataInputRefs>_74FB79B1-3568-4965-AD7E-C4DA797582A1_ErrorProcessInputX</bpmn2:dataInputRefs>
          <bpmn2:dataInputRefs>_74FB79B1-3568-4965-AD7E-C4DA797582A1_FacilityIdInputX</bpmn2:dataInputRefs>
          <bpmn2:dataInputRefs>_74FB79B1-3568-4965-AD7E-C4DA797582A1_ObjectNameInputX</bpmn2:dataInputRefs>
          <bpmn2:dataInputRefs>_74FB79B1-3568-4965-AD7E-C4DA797582A1_PartyIdInputX</bpmn2:dataInputRefs>
          <bpmn2:dataInputRefs>_74FB79B1-3568-4965-AD7E-C4DA797582A1_TaskNameInputX</bpmn2:dataInputRefs>
        </bpmn2:inputSet>
        <bpmn2:outputSet id="_6f2dVCoFEe-RvpWAYG7VGQ">
          <bpmn2:dataOutputRefs>_74FB79B1-3568-4965-AD7E-C4DA797582A1_AuthorizationOutputX</bpmn2:dataOutputRefs>
          <bpmn2:dataOutputRefs>_74FB79B1-3568-4965-AD7E-C4DA797582A1_ResultOutputX</bpmn2:dataOutputRefs>
        </bpmn2:outputSet>
      </bpmn2:ioSpecification>
      <bpmn2:dataInputAssociation id="_6f2dVSoFEe-RvpWAYG7VGQ">
        <bpmn2:sourceRef>requestId</bpmn2:sourceRef>
        <bpmn2:targetRef>_74FB79B1-3568-4965-AD7E-C4DA797582A1_RequestIdInputX</bpmn2:targetRef>
      </bpmn2:dataInputAssociation>
      <bpmn2:dataInputAssociation id="_6f2dVioFEe-RvpWAYG7VGQ">
        <bpmn2:targetRef>_74FB79B1-3568-4965-AD7E-C4DA797582A1_OperationNameInputX</bpmn2:targetRef>
        <bpmn2:assignment id="_6f2dVyoFEe-RvpWAYG7VGQ">
          <bpmn2:from xsi:type="bpmn2:tFormalExpression" id="_6f2dWCoFEe-RvpWAYG7VGQ"><![CDATA[createConsentFromOPMSToConsentMS]]></bpmn2:from>
          <bpmn2:to xsi:type="bpmn2:tFormalExpression" id="_6f2dWSoFEe-RvpWAYG7VGQ">_74FB79B1-3568-4965-AD7E-C4DA797582A1_OperationNameInputX</bpmn2:to>
        </bpmn2:assignment>
      </bpmn2:dataInputAssociation>
      <bpmn2:dataInputAssociation id="_6f2dWioFEe-RvpWAYG7VGQ">
        <bpmn2:targetRef>_74FB79B1-3568-4965-AD7E-C4DA797582A1_ServiceNameInputX</bpmn2:targetRef>
        <bpmn2:assignment id="_6f2dWyoFEe-RvpWAYG7VGQ">
          <bpmn2:from xsi:type="bpmn2:tFormalExpression" id="_6f2dXCoFEe-RvpWAYG7VGQ"><![CDATA[CorporateLOSJavaServices]]></bpmn2:from>
          <bpmn2:to xsi:type="bpmn2:tFormalExpression" id="_6f2dXSoFEe-RvpWAYG7VGQ">_74FB79B1-3568-4965-AD7E-C4DA797582A1_ServiceNameInputX</bpmn2:to>
        </bpmn2:assignment>
      </bpmn2:dataInputAssociation>
      <bpmn2:dataInputAssociation id="_6f2dXioFEe-RvpWAYG7VGQ">
        <bpmn2:sourceRef>authorization</bpmn2:sourceRef>
        <bpmn2:targetRef>_74FB79B1-3568-4965-AD7E-C4DA797582A1_AuthorizationInputX</bpmn2:targetRef>
      </bpmn2:dataInputAssociation>
      <bpmn2:dataInputAssociation id="_6f2dXyoFEe-RvpWAYG7VGQ">
        <bpmn2:sourceRef>additionalParams</bpmn2:sourceRef>
        <bpmn2:targetRef>_74FB79B1-3568-4965-AD7E-C4DA797582A1_AdditionalParametersInputX</bpmn2:targetRef>
      </bpmn2:dataInputAssociation>
      <bpmn2:dataInputAssociation id="_6f2dYCoFEe-RvpWAYG7VGQ">
        <bpmn2:targetRef>_74FB79B1-3568-4965-AD7E-C4DA797582A1_TaskNameInputX</bpmn2:targetRef>
        <bpmn2:assignment id="_6f2dYSoFEe-RvpWAYG7VGQ">
          <bpmn2:from xsi:type="bpmn2:tFormalExpression" id="_6f2dYioFEe-RvpWAYG7VGQ"><![CDATA[OriginationServiceTask]]></bpmn2:from>
          <bpmn2:to xsi:type="bpmn2:tFormalExpression" id="_6f2dYyoFEe-RvpWAYG7VGQ">_74FB79B1-3568-4965-AD7E-C4DA797582A1_TaskNameInputX</bpmn2:to>
        </bpmn2:assignment>
      </bpmn2:dataInputAssociation>
      <bpmn2:dataOutputAssociation id="_6f2dZCoFEe-RvpWAYG7VGQ">
        <bpmn2:sourceRef>_74FB79B1-3568-4965-AD7E-C4DA797582A1_AuthorizationOutputX</bpmn2:sourceRef>
        <bpmn2:targetRef>authorization</bpmn2:targetRef>
      </bpmn2:dataOutputAssociation>
      <bpmn2:dataOutputAssociation id="_6f2dZSoFEe-RvpWAYG7VGQ">
        <bpmn2:sourceRef>_74FB79B1-3568-4965-AD7E-C4DA797582A1_ResultOutputX</bpmn2:sourceRef>
        <bpmn2:targetRef>response</bpmn2:targetRef>
      </bpmn2:dataOutputAssociation>
    </bpmn2:task>
    <bpmn2:endEvent id="_F08F484F-F084-4305-A62C-A76F4B740D13">
      <bpmn2:incoming>_2845F112-A4D9-41E1-9FFB-CCF30007103F</bpmn2:incoming>
    </bpmn2:endEvent>
    <bpmn2:subProcess id="_D8CB23B5-4EE4-4338-A728-D5176BC45719" name="Create Party Consents Sub-process">
      <bpmn2:extensionElements>
        <drools:metaData name="elementname">
          <drools:metaValue><![CDATA[Create Party Consents Sub-process]]></drools:metaValue>
        </drools:metaData>
      </bpmn2:extensionElements>
      <bpmn2:incoming>_94860009-4612-4030-B8FB-35672E788D3E</bpmn2:incoming>
      <bpmn2:outgoing>_2845F112-A4D9-41E1-9FFB-CCF30007103F</bpmn2:outgoing>
      <bpmn2:ioSpecification id="_6f2dZioFEe-RvpWAYG7VGQ">
        <bpmn2:dataInput id="_D8CB23B5-4EE4-4338-A728-D5176BC45719_IN_COLLECTIONInputX" itemSubjectRef="_newPartywiseConsentsItem" name="IN_COLLECTION"/>
        <bpmn2:dataInput id="_D8CB23B5-4EE4-4338-A728-D5176BC45719_partyWiseConsentInputX" itemSubjectRef="_D8CB23B5-4EE4-4338-A728-D5176BC45719_multiInstanceItemType_partyWiseConsent" name="partyWiseConsent"/>
        <bpmn2:inputSet id="_6f2dZyoFEe-RvpWAYG7VGQ">
          <bpmn2:dataInputRefs>_D8CB23B5-4EE4-4338-A728-D5176BC45719_IN_COLLECTIONInputX</bpmn2:dataInputRefs>
          <bpmn2:dataInputRefs>_D8CB23B5-4EE4-4338-A728-D5176BC45719_partyWiseConsentInputX</bpmn2:dataInputRefs>
        </bpmn2:inputSet>
        <bpmn2:outputSet id="_6f2daCoFEe-RvpWAYG7VGQ"/>
      </bpmn2:ioSpecification>
      <bpmn2:property id="partyWiseConsent" itemSubjectRef="_partyWiseConsentItem" name="partyWiseConsent"/>
      <bpmn2:property id="createResponse" itemSubjectRef="_createResponseItem" name="createResponse"/>
      <bpmn2:dataInputAssociation id="_6f2daSoFEe-RvpWAYG7VGQ">
        <bpmn2:sourceRef>newPartywiseConsents</bpmn2:sourceRef>
        <bpmn2:targetRef>_D8CB23B5-4EE4-4338-A728-D5176BC45719_IN_COLLECTIONInputX</bpmn2:targetRef>
      </bpmn2:dataInputAssociation>
      <bpmn2:multiInstanceLoopCharacteristics id="_6f2daioFEe-RvpWAYG7VGQ">
        <bpmn2:loopDataInputRef>_D8CB23B5-4EE4-4338-A728-D5176BC45719_IN_COLLECTIONInputX</bpmn2:loopDataInputRef>
        <bpmn2:inputDataItem xsi:type="bpmn2:tDataInput" id="partyWiseConsent" itemSubjectRef="_D8CB23B5-4EE4-4338-A728-D5176BC45719_multiInstanceItemType_partyWiseConsent" name="partyWiseConsent"/>
      </bpmn2:multiInstanceLoopCharacteristics>
      <bpmn2:sequenceFlow id="_08E6B065-01DE-48E0-BB03-E6D342ED86CD" sourceRef="_D00F34B5-3E89-491E-8D71-63ABB6032B28" targetRef="_89195C0C-A182-47DD-BD62-4F34D61419B4">
        <bpmn2:extensionElements>
          <drools:metaData name="isAutoConnection.source">
            <drools:metaValue><![CDATA[true]]></drools:metaValue>
          </drools:metaData>
          <drools:metaData name="isAutoConnection.target">
            <drools:metaValue><![CDATA[true]]></drools:metaValue>
          </drools:metaData>
        </bpmn2:extensionElements>
      </bpmn2:sequenceFlow>
      <bpmn2:sequenceFlow id="_BAB8C91B-AEA2-4AA9-97A9-ADF1BDA68AA8" sourceRef="_EC5C476B-7258-442D-B02E-70F79C04F321" targetRef="_D00F34B5-3E89-491E-8D71-63ABB6032B28"/>
      <bpmn2:endEvent id="_89195C0C-A182-47DD-BD62-4F34D61419B4">
        <bpmn2:incoming>_08E6B065-01DE-48E0-BB03-E6D342ED86CD</bpmn2:incoming>
      </bpmn2:endEvent>
      <bpmn2:startEvent id="_EC5C476B-7258-442D-B02E-70F79C04F321">
        <bpmn2:outgoing>_BAB8C91B-AEA2-4AA9-97A9-ADF1BDA68AA8</bpmn2:outgoing>
      </bpmn2:startEvent>
      <bpmn2:task id="_D00F34B5-3E89-491E-8D71-63ABB6032B28" drools:taskName="OriginationServiceTask" name="Create Party Consents">
        <bpmn2:documentation id="_6f3EYCoFEe-RvpWAYG7VGQ"><![CDATA[OriginationWorkItem/index.html]]></bpmn2:documentation>
        <bpmn2:extensionElements>
          <drools:metaData name="elementname">
            <drools:metaValue><![CDATA[Create Party Consents]]></drools:metaValue>
          </drools:metaData>
        </bpmn2:extensionElements>
        <bpmn2:incoming>_BAB8C91B-AEA2-4AA9-97A9-ADF1BDA68AA8</bpmn2:incoming>
        <bpmn2:outgoing>_08E6B065-01DE-48E0-BB03-E6D342ED86CD</bpmn2:outgoing>
        <bpmn2:ioSpecification id="_6f3EYSoFEe-RvpWAYG7VGQ">
          <bpmn2:dataInput id="_D00F34B5-3E89-491E-8D71-63ABB6032B28_OperationNameInputX" drools:dtype="String" itemSubjectRef="__D00F34B5-3E89-491E-8D71-63ABB6032B28_OperationNameInputXItem" name="OperationName"/>
          <bpmn2:dataInput id="_D00F34B5-3E89-491E-8D71-63ABB6032B28_ServiceNameInputX" drools:dtype="String" itemSubjectRef="__D00F34B5-3E89-491E-8D71-63ABB6032B28_ServiceNameInputXItem" name="ServiceName"/>
          <bpmn2:dataInput id="_D00F34B5-3E89-491E-8D71-63ABB6032B28_AdditionalParametersInputX" drools:dtype="String" itemSubjectRef="__D00F34B5-3E89-491E-8D71-63ABB6032B28_AdditionalParametersInputXItem" name="AdditionalParameters"/>
          <bpmn2:dataInput id="_D00F34B5-3E89-491E-8D71-63ABB6032B28_AuthorizationInputX" drools:dtype="String" itemSubjectRef="__D00F34B5-3E89-491E-8D71-63ABB6032B28_AuthorizationInputXItem" name="Authorization"/>
          <bpmn2:dataInput id="_D00F34B5-3E89-491E-8D71-63ABB6032B28_RequestIdInputX" drools:dtype="String" itemSubjectRef="__D00F34B5-3E89-491E-8D71-63ABB6032B28_RequestIdInputXItem" name="RequestId"/>
          <bpmn2:dataInput id="_D00F34B5-3E89-491E-8D71-63ABB6032B28_ApplicationIdInputX" drools:dtype="String" itemSubjectRef="__D00F34B5-3E89-491E-8D71-63ABB6032B28_ApplicationIdInputXItem" name="ApplicationId"/>
          <bpmn2:dataInput id="_D00F34B5-3E89-491E-8D71-63ABB6032B28_CIFInputX" drools:dtype="String" itemSubjectRef="__D00F34B5-3E89-491E-8D71-63ABB6032B28_CIFInputXItem" name="CIF"/>
          <bpmn2:dataInput id="_D00F34B5-3E89-491E-8D71-63ABB6032B28_ErrorProcessInputX" drools:dtype="String" itemSubjectRef="__D00F34B5-3E89-491E-8D71-63ABB6032B28_ErrorProcessInputXItem" name="ErrorProcess"/>
          <bpmn2:dataInput id="_D00F34B5-3E89-491E-8D71-63ABB6032B28_FacilityIdInputX" drools:dtype="String" itemSubjectRef="__D00F34B5-3E89-491E-8D71-63ABB6032B28_FacilityIdInputXItem" name="FacilityId"/>
          <bpmn2:dataInput id="_D00F34B5-3E89-491E-8D71-63ABB6032B28_ObjectNameInputX" drools:dtype="String" itemSubjectRef="__D00F34B5-3E89-491E-8D71-63ABB6032B28_ObjectNameInputXItem" name="ObjectName"/>
          <bpmn2:dataInput id="_D00F34B5-3E89-491E-8D71-63ABB6032B28_PartyIdInputX" drools:dtype="String" itemSubjectRef="__D00F34B5-3E89-491E-8D71-63ABB6032B28_PartyIdInputXItem" name="PartyId"/>
          <bpmn2:dataInput id="_D00F34B5-3E89-491E-8D71-63ABB6032B28_TaskNameInputX" drools:dtype="Object" name="TaskName"/>
          <bpmn2:dataOutput id="_D00F34B5-3E89-491E-8D71-63ABB6032B28_AuthorizationOutputX" drools:dtype="String" itemSubjectRef="__D00F34B5-3E89-491E-8D71-63ABB6032B28_AuthorizationOutputXItem" name="Authorization"/>
          <bpmn2:dataOutput id="_D00F34B5-3E89-491E-8D71-63ABB6032B28_ResultOutputX" drools:dtype="String" itemSubjectRef="__D00F34B5-3E89-491E-8D71-63ABB6032B28_ResultOutputXItem" name="Result"/>
          <bpmn2:inputSet id="_6f3EYioFEe-RvpWAYG7VGQ">
            <bpmn2:dataInputRefs>_D00F34B5-3E89-491E-8D71-63ABB6032B28_OperationNameInputX</bpmn2:dataInputRefs>
            <bpmn2:dataInputRefs>_D00F34B5-3E89-491E-8D71-63ABB6032B28_ServiceNameInputX</bpmn2:dataInputRefs>
            <bpmn2:dataInputRefs>_D00F34B5-3E89-491E-8D71-63ABB6032B28_AdditionalParametersInputX</bpmn2:dataInputRefs>
            <bpmn2:dataInputRefs>_D00F34B5-3E89-491E-8D71-63ABB6032B28_AuthorizationInputX</bpmn2:dataInputRefs>
            <bpmn2:dataInputRefs>_D00F34B5-3E89-491E-8D71-63ABB6032B28_RequestIdInputX</bpmn2:dataInputRefs>
            <bpmn2:dataInputRefs>_D00F34B5-3E89-491E-8D71-63ABB6032B28_ApplicationIdInputX</bpmn2:dataInputRefs>
            <bpmn2:dataInputRefs>_D00F34B5-3E89-491E-8D71-63ABB6032B28_CIFInputX</bpmn2:dataInputRefs>
            <bpmn2:dataInputRefs>_D00F34B5-3E89-491E-8D71-63ABB6032B28_ErrorProcessInputX</bpmn2:dataInputRefs>
            <bpmn2:dataInputRefs>_D00F34B5-3E89-491E-8D71-63ABB6032B28_FacilityIdInputX</bpmn2:dataInputRefs>
            <bpmn2:dataInputRefs>_D00F34B5-3E89-491E-8D71-63ABB6032B28_ObjectNameInputX</bpmn2:dataInputRefs>
            <bpmn2:dataInputRefs>_D00F34B5-3E89-491E-8D71-63ABB6032B28_PartyIdInputX</bpmn2:dataInputRefs>
            <bpmn2:dataInputRefs>_D00F34B5-3E89-491E-8D71-63ABB6032B28_TaskNameInputX</bpmn2:dataInputRefs>
          </bpmn2:inputSet>
          <bpmn2:outputSet id="_6f3EYyoFEe-RvpWAYG7VGQ">
            <bpmn2:dataOutputRefs>_D00F34B5-3E89-491E-8D71-63ABB6032B28_AuthorizationOutputX</bpmn2:dataOutputRefs>
            <bpmn2:dataOutputRefs>_D00F34B5-3E89-491E-8D71-63ABB6032B28_ResultOutputX</bpmn2:dataOutputRefs>
          </bpmn2:outputSet>
        </bpmn2:ioSpecification>
        <bpmn2:dataInputAssociation id="_6f3EZCoFEe-RvpWAYG7VGQ">
          <bpmn2:sourceRef>operationName</bpmn2:sourceRef>
          <bpmn2:targetRef>_D00F34B5-3E89-491E-8D71-63ABB6032B28_OperationNameInputX</bpmn2:targetRef>
        </bpmn2:dataInputAssociation>
        <bpmn2:dataInputAssociation id="_6f3EZSoFEe-RvpWAYG7VGQ">
          <bpmn2:sourceRef>serviceName</bpmn2:sourceRef>
          <bpmn2:targetRef>_D00F34B5-3E89-491E-8D71-63ABB6032B28_ServiceNameInputX</bpmn2:targetRef>
        </bpmn2:dataInputAssociation>
        <bpmn2:dataInputAssociation id="_6f3EZioFEe-RvpWAYG7VGQ">
          <bpmn2:sourceRef>partyWiseConsent</bpmn2:sourceRef>
          <bpmn2:targetRef>_D00F34B5-3E89-491E-8D71-63ABB6032B28_AdditionalParametersInputX</bpmn2:targetRef>
        </bpmn2:dataInputAssociation>
        <bpmn2:dataInputAssociation id="_6f3EZyoFEe-RvpWAYG7VGQ">
          <bpmn2:sourceRef>authorization</bpmn2:sourceRef>
          <bpmn2:targetRef>_D00F34B5-3E89-491E-8D71-63ABB6032B28_AuthorizationInputX</bpmn2:targetRef>
        </bpmn2:dataInputAssociation>
        <bpmn2:dataInputAssociation id="_6f3EaCoFEe-RvpWAYG7VGQ">
          <bpmn2:sourceRef>requestId</bpmn2:sourceRef>
          <bpmn2:targetRef>_D00F34B5-3E89-491E-8D71-63ABB6032B28_RequestIdInputX</bpmn2:targetRef>
        </bpmn2:dataInputAssociation>
        <bpmn2:dataInputAssociation id="_6f3EaSoFEe-RvpWAYG7VGQ">
          <bpmn2:targetRef>_D00F34B5-3E89-491E-8D71-63ABB6032B28_TaskNameInputX</bpmn2:targetRef>
          <bpmn2:assignment id="_6f3EaioFEe-RvpWAYG7VGQ">
            <bpmn2:from xsi:type="bpmn2:tFormalExpression" id="_6f3EayoFEe-RvpWAYG7VGQ"><![CDATA[OriginationServiceTask]]></bpmn2:from>
            <bpmn2:to xsi:type="bpmn2:tFormalExpression" id="_6f3EbCoFEe-RvpWAYG7VGQ">_D00F34B5-3E89-491E-8D71-63ABB6032B28_TaskNameInputX</bpmn2:to>
          </bpmn2:assignment>
        </bpmn2:dataInputAssociation>
        <bpmn2:dataOutputAssociation id="_6f3EbSoFEe-RvpWAYG7VGQ">
          <bpmn2:sourceRef>_D00F34B5-3E89-491E-8D71-63ABB6032B28_AuthorizationOutputX</bpmn2:sourceRef>
          <bpmn2:targetRef>authorization</bpmn2:targetRef>
        </bpmn2:dataOutputAssociation>
        <bpmn2:dataOutputAssociation id="_6f3EbioFEe-RvpWAYG7VGQ">
          <bpmn2:sourceRef>_D00F34B5-3E89-491E-8D71-63ABB6032B28_ResultOutputX</bpmn2:sourceRef>
          <bpmn2:targetRef>createResponse</bpmn2:targetRef>
        </bpmn2:dataOutputAssociation>
      </bpmn2:task>
    </bpmn2:subProcess>
  </bpmn2:process>
  <bpmndi:BPMNDiagram id="_6f3EbyoFEe-RvpWAYG7VGQ">
    <bpmndi:BPMNPlane id="_6f3EcCoFEe-RvpWAYG7VGQ" bpmnElement="InfinityAssist.CopyConsentstoConsentMS">
      <bpmndi:BPMNShape id="shape__D8CB23B5-4EE4-4338-A728-D5176BC45719" bpmnElement="_D8CB23B5-4EE4-4338-A728-D5176BC45719">
        <dc:Bounds height="219.0" width="465.0" x="397.0" y="4.0"/>
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="shape__D00F34B5-3E89-491E-8D71-63ABB6032B28" bpmnElement="_D00F34B5-3E89-491E-8D71-63ABB6032B28">
        <dc:Bounds height="102.0" width="154.0" x="533.0" y="63.0"/>
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="shape__EC5C476B-7258-442D-B02E-70F79C04F321" bpmnElement="_EC5C476B-7258-442D-B02E-70F79C04F321">
        <dc:Bounds height="56.0" width="56.0" x="424.0" y="86.0"/>
      </bpmndi:BPMNShape>
      <bpmndi:BPMNEdge id="edge_shape__EC5C476B-7258-442D-B02E-70F79C04F321_to_shape__D00F34B5-3E89-491E-8D71-63ABB6032B28" bpmnElement="_BAB8C91B-AEA2-4AA9-97A9-ADF1BDA68AA8">
        <di:waypoint xsi:type="dc:Point" x="452.0" y="114.0"/>
        <di:waypoint xsi:type="dc:Point" x="533.0" y="114.0"/>
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNShape id="shape__89195C0C-A182-47DD-BD62-4F34D61419B4" bpmnElement="_89195C0C-A182-47DD-BD62-4F34D61419B4">
        <dc:Bounds height="56.0" width="56.0" x="754.0" y="86.0"/>
      </bpmndi:BPMNShape>
      <bpmndi:BPMNEdge id="edge_shape__D00F34B5-3E89-491E-8D71-63ABB6032B28_to_shape__89195C0C-A182-47DD-BD62-4F34D61419B4" bpmnElement="_08E6B065-01DE-48E0-BB03-E6D342ED86CD">
        <di:waypoint xsi:type="dc:Point" x="687.0" y="114.0"/>
        <di:waypoint xsi:type="dc:Point" x="754.0" y="114.0"/>
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNShape id="shape__F08F484F-F084-4305-A62C-A76F4B740D13" bpmnElement="_F08F484F-F084-4305-A62C-A76F4B740D13">
        <dc:Bounds height="56.0" width="56.0" x="938.0" y="86.0"/>
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="shape__74FB79B1-3568-4965-AD7E-C4DA797582A1" bpmnElement="_74FB79B1-3568-4965-AD7E-C4DA797582A1">
        <dc:Bounds height="102.0" width="154.0" x="185.0" y="63.0"/>
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="shape__38AD41E3-39D3-4D9E-9F40-B4433DF4F6B8" bpmnElement="_38AD41E3-39D3-4D9E-9F40-B4433DF4F6B8">
        <dc:Bounds height="56.0" width="56.0" x="71.0" y="86.0"/>
      </bpmndi:BPMNShape>
      <bpmndi:BPMNEdge id="edge_shape__D8CB23B5-4EE4-4338-A728-D5176BC45719_to_shape__F08F484F-F084-4305-A62C-A76F4B740D13" bpmnElement="_2845F112-A4D9-41E1-9FFB-CCF30007103F">
        <di:waypoint xsi:type="dc:Point" x="862.0" y="113.5"/>
        <di:waypoint xsi:type="dc:Point" x="938.0" y="114.0"/>
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="edge_shape__38AD41E3-39D3-4D9E-9F40-B4433DF4F6B8_to_shape__74FB79B1-3568-4965-AD7E-C4DA797582A1" bpmnElement="_A168F590-5F1F-41F0-9DBC-0B1ADD1C7185">
        <di:waypoint xsi:type="dc:Point" x="99.0" y="114.0"/>
        <di:waypoint xsi:type="dc:Point" x="185.0" y="114.0"/>
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="edge_shape__74FB79B1-3568-4965-AD7E-C4DA797582A1_to_shape__D8CB23B5-4EE4-4338-A728-D5176BC45719" bpmnElement="_94860009-4612-4030-B8FB-35672E788D3E">
        <di:waypoint xsi:type="dc:Point" x="262.0" y="114.0"/>
        <di:waypoint xsi:type="dc:Point" x="397.0" y="113.5"/>
      </bpmndi:BPMNEdge>
    </bpmndi:BPMNPlane>
  </bpmndi:BPMNDiagram>
  <bpmn2:relationship id="_6f3EcSoFEe-RvpWAYG7VGQ" type="BPSimData">
    <bpmn2:extensionElements>
      <bpsim:BPSimData>
        <bpsim:Scenario xsi:type="bpsim:Scenario" id="default" name="Simulationscenario">
          <bpsim:ScenarioParameters xsi:type="bpsim:ScenarioParameters"/>
          <bpsim:ElementParameters xsi:type="bpsim:ElementParameters" elementRef="_74FB79B1-3568-4965-AD7E-C4DA797582A1" id="_6f3EcioFEe-RvpWAYG7VGQ">
            <bpsim:TimeParameters xsi:type="bpsim:TimeParameters">
              <bpsim:ProcessingTime xsi:type="bpsim:Parameter">
                <bpsim:NormalDistribution mean="0.0" standardDeviation="0.0"/>
              </bpsim:ProcessingTime>
            </bpsim:TimeParameters>
            <bpsim:ResourceParameters xsi:type="bpsim:ResourceParameters">
              <bpsim:Availability xsi:type="bpsim:Parameter">
                <bpsim:FloatingParameter value="0.0"/>
              </bpsim:Availability>
              <bpsim:Quantity xsi:type="bpsim:Parameter">
                <bpsim:FloatingParameter value="0.0"/>
              </bpsim:Quantity>
            </bpsim:ResourceParameters>
            <bpsim:CostParameters xsi:type="bpsim:CostParameters">
              <bpsim:UnitCost xsi:type="bpsim:Parameter">
                <bpsim:FloatingParameter value="0.0"/>
              </bpsim:UnitCost>
            </bpsim:CostParameters>
          </bpsim:ElementParameters>
          <bpsim:ElementParameters xsi:type="bpsim:ElementParameters" elementRef="_38AD41E3-39D3-4D9E-9F40-B4433DF4F6B8" id="_6f3EcyoFEe-RvpWAYG7VGQ">
            <bpsim:TimeParameters xsi:type="bpsim:TimeParameters">
              <bpsim:ProcessingTime xsi:type="bpsim:Parameter">
                <bpsim:NormalDistribution mean="0.0" standardDeviation="0.0"/>
              </bpsim:ProcessingTime>
            </bpsim:TimeParameters>
          </bpsim:ElementParameters>
        </bpsim:Scenario>
      </bpsim:BPSimData>
    </bpmn2:extensionElements>
    <bpmn2:source>_6f2dUCoFEe-RvpWAYG7VGQ</bpmn2:source>
    <bpmn2:target>_6f2dUCoFEe-RvpWAYG7VGQ</bpmn2:target>
  </bpmn2:relationship>
</bpmn2:definitions>
